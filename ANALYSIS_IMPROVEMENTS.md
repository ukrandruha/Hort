# –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–µ–∫—Ç—É Hort —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —â–æ–¥–æ –ø–æ–∫—Ä–∞—â–µ–Ω—å

## üìã –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥

–ü—Ä–æ–µ–∫—Ç —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑:
- **Backend**: Fastify + TypeScript + Prisma + PostgreSQL
- **Frontend**: React + TypeScript + Vite + TailwindCSS
- **–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª**: –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–æ–±–æ—Ç–∞–º–∏, WebRTC –≤—ñ–¥–µ–æ, –∫–∞—Ä—Ç–∏ Leaflet, –º—ñ—Å—ñ—ó

---

## üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –±–µ–∑–ø–µ–∫–∏

### 1. –•–∞—Ä–¥–∫–æ–¥–∂–µ–Ω–∏–π JWT Secret
**–ü—Ä–æ–±–ª–µ–º–∞**: `backend/src/index.ts:19`
```typescript
await app.register(jwt, { secret: "HORT_SECRET_KEY" });
```

**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è
```typescript
await app.register(jwt, { 
  secret: process.env.JWT_SECRET || (() => {
    throw new Error("JWT_SECRET –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ");
  })()
});
```

### 2. CORS –¥–æ–∑–≤–æ–ª—è—î –≤—Å—ñ –¥–∂–µ—Ä–µ–ª–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: `backend/src/index.ts:18`
```typescript
await app.register(cors, { origin: "*" });
```

**–†—ñ—à–µ–Ω–Ω—è**: –û–±–º–µ–∂–∏—Ç–∏ –¥–æ–∑–≤–æ–ª–µ–Ω—ñ –¥–∂–µ—Ä–µ–ª–∞
```typescript
await app.register(cors, { 
  origin: process.env.CORS_ORIGIN?.split(",") || ["http://localhost:5173"]
});
```

### 3. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
**–ü—Ä–æ–±–ª–µ–º–∞**: –í—ñ–¥—Å—É—Ç–Ω—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –≤ routes (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `auth.routes.ts`)

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ Fastify schema validation –∞–±–æ Zod

### 4. –ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–ª–µ–π
**–ü—Ä–æ–±–ª–µ–º–∞**: `robot.routes.ts:65-67, 88-89` - –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ admin —Ä–æ–ª—ñ

**–†—ñ—à–µ–Ω–Ω—è**: –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ —Ç–∞ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–ª–µ–π

### 5. –í—ñ–¥–∫—Ä–∏—Ç–∏–π endpoint –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–±–æ—Ç—ñ–≤
**–ü—Ä–æ–±–ª–µ–º–∞**: `robot.routes.ts:22` - POST `/api/robots/update` –±–µ–∑ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ API –∫–ª—é—á –∞–±–æ —ñ–Ω—à–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –¥–ª—è —Ä–æ–±–æ—Ç—ñ–≤

---

## üü† –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 1. –î—É–±–ª—é–≤–∞–Ω–Ω—è PrismaClient —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤
**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–∂–µ–Ω —Ñ–∞–π–ª —Å—Ç–≤–æ—Ä—é—î —Å–≤—ñ–π `new PrismaClient()`

**–§–∞–π–ª–∏**: 
- `auth.routes.ts:5`
- `auth.service.ts:4`
- `robot.service.ts:7`
- `robotCamera.service.ts:4`

**–†—ñ—à–µ–Ω–Ω—è**: –°—Ç–≤–æ—Ä–∏—Ç–∏ singleton –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ dependency injection

### 2. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
**–ü—Ä–æ–±–ª–µ–º–∞**: –†—ñ–∑–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —É —Ä—ñ–∑–Ω–∏—Ö –º—ñ—Å—Ü—è—Ö

**–†—ñ—à–µ–Ω–Ω—è**: –°—Ç–≤–æ—Ä–∏—Ç–∏ error handler middleware

### 3. –ó–º—ñ—à—É–≤–∞–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –≤ routes
**–ü—Ä–æ–±–ª–µ–º–∞**: –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ –≤ routes —Ñ–∞–π–ª–∞—Ö

**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–Ω–µ—Å—Ç–∏ –≤—Å—é –ª–æ–≥—ñ–∫—É –≤ service —Ñ–∞–π–ª–∏

### 4. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å dependency injection
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä—è–º—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ PrismaClient

**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Fastify decorators –¥–ª—è dependency injection

---

## üü° –ü—Ä–æ–±–ª–µ–º–∏ TypeScript

### 1. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å strict mode —É frontend
**–ü—Ä–æ–±–ª–µ–º–∞**: `frontend/tsconfig.json:7` - `strict: false`

**–†—ñ—à–µ–Ω–Ω—è**: –£–≤—ñ–º–∫–Ω—É—Ç–∏ strict mode –ø–æ—Å—Ç—É–ø–æ–≤–æ

### 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `any` —Ç–∏–ø—ñ–≤
**–ü—Ä–æ–±–ª–µ–º–∏**:
- `AuthContext.tsx:11` - `children` –±–µ–∑ —Ç–∏–ø—É
- `ProtectedRoute.tsx:4` - `children` –±–µ–∑ —Ç–∏–ø—É
- `RobotTable.tsx:13, 16, 18` - –º–∞—Å–∏–≤–∏ –±–µ–∑ —Ç–∏–ø—ñ–≤
- `VideoViewer.tsx:21` - `any` —Ç–∏–ø

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–∏–ø–∏

### 3. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ç–∏–ø—ñ–≤ –¥–ª—è Fastify
**–ü—Ä–æ–±–ª–µ–º–∞**: `fastify.d.ts:5` - `auth: any`

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–ª—è auth middleware

---

## üü¢ –ü—Ä–æ–±–ª–µ–º–∏ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É

### 1. –ó–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π –∫–æ–¥
**–§–∞–π–ª–∏ –∑ –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–º –∫–æ–¥–æ–º**:
- `robot.routes.ts:31-42` - updatewebrtcclient
- `robot.routes.ts:65-67` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–ª—ñ
- `robot.service.ts:11-15` - —Å—Ç–∞—Ä–∏–π getAllRobots
- `robot.service.ts:96-103` - updateStatusWebRtc
- `robotCamera.service.ts:44-47` - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–∞–º–µ—Ä

**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–¥–∞–ª–∏—Ç–∏ –∞–±–æ –≤—ñ–¥–Ω–æ–≤–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### 2. –ú–∞–≥—ñ—á–Ω—ñ —á–∏—Å–ª–∞
**–ü—Ä–∏–∫–ª–∞–¥–∏**:
- `RobotTable.tsx:54` - `3000` (—ñ–Ω—Ç–µ—Ä–≤–∞–ª –æ–Ω–æ–≤–ª–µ–Ω–Ω—è)
- `RobotTable.tsx:238` - `10000` (—Ç–∞–π–º–∞—É—Ç offline)
- `auth.service.ts:7` - `10` (bcrypt rounds)

**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –∞–±–æ env –∑–º—ñ–Ω–Ω—ñ

### 3. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å env —Ñ–∞–π–ª—ñ–≤
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–º–∞—î `.env` —Ñ–∞–π–ª—ñ–≤ —Ç–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤

**–†—ñ—à–µ–Ω–Ω—è**: –°—Ç–≤–æ—Ä–∏—Ç–∏ `.env.example` –¥–ª—è backend —Ç–∞ frontend

### 4. –•–∞—Ä–¥–∫–æ–¥–∂–µ–Ω–∏–π baseURL
**–ü—Ä–æ–±–ª–µ–º–∞**: `api.ts:4` - `baseURL: "https://andrii.razoom-print.com"`

**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ env –∑–º—ñ–Ω–Ω—É

### 5. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å error boundaries —É React
**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ ErrorBoundary –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

---

## üîµ –ü—Ä–æ–±–ª–µ–º–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

### 1. –ù–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ñ–∞–π–ª–∏ –ë–î
**–ü—Ä–æ–±–ª–µ–º–∞**: 
- `backend/database.sqlite`
- `backend/prisma/dev.db`

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ –≤ `.gitignore` –∞–±–æ –≤–∏–¥–∞–ª–∏—Ç–∏

### 2. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ–π
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–º–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –º—ñ–≥—Ä–∞—Ü—ñ–π —É –ø—Ä–æ–µ–∫—Ç—ñ

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ Prisma migrations

---

## üü£ –ü—Ä–æ–±–ª–µ–º–∏ frontend

### 1. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å loading states
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–º–∞—î —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ loading states –¥–ª—è async –æ–ø–µ—Ä–∞—Ü—ñ–π

### 2. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫ API
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

**–†—ñ—à–µ–Ω–Ω—è**: –î–æ–¥–∞—Ç–∏ –≥–ª–æ–±–∞–ª—å–Ω–∏–π error interceptor

### 3. –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ñ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: `RobotTable.tsx:56` - –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ `videoRobot` –≤ useEffect

**–†—ñ—à–µ–Ω–Ω—è**: –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ useEffect

### 4. –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –º–µ–º–æ—ñ–∑–∞—Ü—ñ—ó
**–†—ñ—à–µ–Ω–Ω—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `useMemo` —Ç–∞ `useCallback` –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ

---

## üìù –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω—ñ)
1. ‚úÖ –î–æ–¥–∞—Ç–∏ env –∑–º—ñ–Ω–Ω—ñ –¥–ª—è JWT_SECRET, DATABASE_URL, CORS_ORIGIN
2. ‚úÖ –û–±–º–µ–∂–∏—Ç–∏ CORS
3. ‚úÖ –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
4. ‚úÖ –í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–ª–µ–π
5. ‚úÖ –ó–∞—Ö–∏—Å—Ç–∏—Ç–∏ endpoint `/api/robots/update`

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–ª–∏–≤—ñ)
1. ‚úÖ –°—Ç–≤–æ—Ä–∏—Ç–∏ singleton –¥–ª—è PrismaClient
2. ‚úÖ –î–æ–¥–∞—Ç–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—É –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫
3. ‚úÖ –í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π –∫–æ–¥
4. ‚úÖ –î–æ–¥–∞—Ç–∏ —Ç–∏–ø–∏ TypeScript
5. ‚úÖ –°—Ç–≤–æ—Ä–∏—Ç–∏ `.env.example` —Ñ–∞–π–ª–∏

### –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 3 (–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è)
1. ‚úÖ –î–æ–¥–∞—Ç–∏ error boundaries
2. ‚úÖ –î–æ–¥–∞—Ç–∏ loading states
3. ‚úÖ –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏
4. ‚úÖ –î–æ–¥–∞—Ç–∏ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—é
5. ‚úÖ –î–æ–¥–∞—Ç–∏ unit —Ç–µ—Å—Ç–∏

---

## üõ†Ô∏è –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –±–æ—Ä–≥

1. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ç–µ—Å—Ç—ñ–≤** - –¥–æ–¥–∞—Ç–∏ unit —Ç–∞ integration —Ç–µ—Å—Ç–∏
2. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ª–æ–≥—É–≤–∞–Ω–Ω—è** - –¥–æ–¥–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è (Winston/Pino)
3. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó API** - –¥–æ–¥–∞—Ç–∏ Swagger/OpenAPI
4. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å CI/CD** - –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –¥–µ–ø–ª–æ–π
5. **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É** - –¥–æ–¥–∞—Ç–∏ health checks —Ç–∞ –º–µ—Ç—Ä–∏–∫–∏

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É

- **TypeScript coverage**: ~70% (–ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–∫—Ä–∞—â–∏—Ç–∏)
- **Error handling**: ~40% (–ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–∫—Ä–∞—â–∏—Ç–∏)
- **Security**: ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏
- **Code duplication**: –°–µ—Ä–µ–¥–Ω—ñ–π —Ä—ñ–≤–µ–Ω—å
- **Test coverage**: 0% (–ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏)

---

## üéØ –ü–ª–∞–Ω –¥—ñ–π

1. **–¢–∏–∂–¥–µ–Ω—å 1**: –í–∏–ø—Ä–∞–≤–∏—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏ –±–µ–∑–ø–µ–∫–∏
2. **–¢–∏–∂–¥–µ–Ω—å 2**: –ü–æ–∫—Ä–∞—â–∏—Ç–∏ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É (PrismaClient, error handling)
3. **–¢–∏–∂–¥–µ–Ω—å 3**: –ü–æ–∫—Ä–∞—â–∏—Ç–∏ TypeScript —Ç–∏–ø–∏ —Ç–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π –∫–æ–¥
4. **–¢–∏–∂–¥–µ–Ω—å 4**: –î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç–∏ —Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
