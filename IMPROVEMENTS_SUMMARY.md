# –ü—ñ–¥—Å—É–º–æ–∫ –ø–æ–∫—Ä–∞—â–µ–Ω—å –ø—Ä–æ–µ–∫—Ç—É Hort

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

### 1. –ë–µ–∑–ø–µ–∫–∞ üîí
- ‚úÖ –î–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É env –∑–º—ñ–Ω–Ω–∏—Ö –¥–ª—è JWT_SECRET
- ‚úÖ –û–±–º–µ–∂–µ–Ω–æ CORS (–∑–∞–º—ñ—Å—Ç—å `*` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è env –∑–º—ñ–Ω–Ω–∞)
- ‚úÖ –î–æ–¥–∞–Ω–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é email —Ç–∞ –ø–∞—Ä–æ–ª—ñ–≤
- ‚úÖ –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–ª–µ–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ –î–æ–¥–∞–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—É –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫

### 2. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ üèóÔ∏è
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ singleton –¥–ª—è PrismaClient (`backend/src/db/prisma.ts`)
- ‚úÖ –í—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏ —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –æ–¥–∏–Ω —ñ–Ω—Å—Ç–∞–Ω—Å PrismaClient
- ‚úÖ –î–æ–¥–∞–Ω–æ —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó (`backend/src/utils/validation.ts`)
- ‚úÖ –î–æ–¥–∞–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—É –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ (`backend/src/utils/errors.ts`)

### 3. TypeScript —Ç–∏–ø–∏ üìò
- ‚úÖ –î–æ–¥–∞–Ω–æ —Ç–∏–ø–∏ –¥–ª—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ (AuthContext, ProtectedRoute)
- ‚úÖ –î–æ–¥–∞–Ω–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å Robot –¥–ª—è RobotTable
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ —Ç–∏–ø–∏ –¥–ª—è Fastify (fastify.d.ts)
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é tsconfig.json (–¥–æ–¥–∞–Ω–æ jsx: "react-jsx")

### 4. –Ø–∫—ñ—Å—Ç—å –∫–æ–¥—É üßπ
- ‚úÖ –í–∏–¥–∞–ª–µ–Ω–æ –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π –∫–æ–¥
- ‚úÖ –í–∏–Ω–µ—Å–µ–Ω–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ (BCRYPT_ROUNDS)
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–∞ null/undefined

### 5. Frontend üåê
- ‚úÖ –î–æ–¥–∞–Ω–æ env –∑–º—ñ–Ω–Ω—É –¥–ª—è API baseURL
- ‚úÖ –î–æ–¥–∞–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π error interceptor –¥–ª—è axios
- ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

---

## üìã –ù–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥—ñ—ó –¥–ª—è –∑–∞–ø—É—Å–∫—É

### Backend

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª** –≤ `backend/` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `backend/.env.example`:
```bash
cd backend
cp .env.example .env
```

2. **–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è**:
```env
DATABASE_URL="postgresql://user:password@localhost:5432/hort_db"
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
PORT=3001
HOST=0.0.0.0
CORS_ORIGIN="http://localhost:5173"
NODE_ENV=development
```

3. **–û–Ω–æ–≤—ñ—Ç—å —ñ–º–ø–æ—Ä—Ç–∏ PrismaClient**:
   - –í—Å—ñ —Ñ–∞–π–ª–∏ —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `import { prisma } from "../db/prisma.js"`
   - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏ –æ–Ω–æ–≤–ª–µ–Ω—ñ

4. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –º—ñ–≥—Ä–∞—Ü—ñ—ó Prisma** (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ):
```bash
cd backend
npm run prisma:migrate
```

### Frontend

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª** –≤ `frontend/`:
```bash
cd frontend
cp .env.example .env
```

2. **–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ**:
```env
VITE_API_BASE_URL=http://localhost:3001
VITE_NODE_ENV=development
```

---

## üîÑ –ó–º—ñ–Ω–∏ –≤ –∫–æ–¥—ñ

### Backend

#### `backend/src/index.ts`
- –î–æ–¥–∞–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É env –∑–º—ñ–Ω–Ω–∏—Ö –¥–ª—è PORT, HOST, CORS_ORIGIN, JWT_SECRET
- –î–æ–¥–∞–Ω–æ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—É –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫

#### `backend/src/db/prisma.ts` (–Ω–æ–≤–∏–π —Ñ–∞–π–ª)
- Singleton pattern –¥–ª—è PrismaClient
- Graceful shutdown

#### `backend/src/utils/errors.ts` (–Ω–æ–≤–∏–π —Ñ–∞–π–ª)
- –ö–ª–∞—Å AppError –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫
- –§—É–Ω–∫—Ü—ñ—è errorHandler –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏

#### `backend/src/utils/validation.ts` (–Ω–æ–≤–∏–π —Ñ–∞–π–ª)
- –§—É–Ω–∫—Ü—ñ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó: email, password, coordinates, robotId

#### `backend/src/auth/auth.routes.ts`
- –î–æ–¥–∞–Ω–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é email —Ç–∞ password
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î prisma –∑ db/prisma.ts

#### `backend/src/auth/auth.service.ts`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î prisma –∑ db/prisma.ts
- –í–∏–Ω–µ—Å–µ–Ω–æ BCRYPT_ROUNDS –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É

#### `backend/src/robots/robot.service.ts`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î prisma –∑ db/prisma.ts
- –î–æ–¥–∞–Ω–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é robotId —Ç–∞ coordinates
- –í–∏–¥–∞–ª–µ–Ω–æ –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π –∫–æ–¥

#### `backend/src/robots/robot.routes.ts`
- –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–ª–µ–π –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ü–æ–∫—Ä–∞—â–µ–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫

#### `backend/src/robots/robotCamera.service.ts`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î prisma –∑ db/prisma.ts
- –í–∏–¥–∞–ª–µ–Ω–æ –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π –∫–æ–¥

### Frontend

#### `frontend/src/api/api.ts`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î env –∑–º—ñ–Ω–Ω—É –¥–ª—è baseURL
- –î–æ–¥–∞–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π error interceptor (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π logout –ø—Ä–∏ 401)

#### `frontend/src/auth/AuthContext.tsx`
- –î–æ–¥–∞–Ω–æ —Ç–∏–ø–∏ –¥–ª—è props

#### `frontend/src/auth/ProtectedRoute.tsx`
- –î–æ–¥–∞–Ω–æ —Ç–∏–ø–∏ –¥–ª—è props

#### `frontend/src/components/RobotTable.tsx`
- –î–æ–¥–∞–Ω–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å Robot
- –î–æ–¥–∞–Ω–æ —Ç–∏–ø–∏ –¥–ª—è –≤—Å—ñ—Ö state –∑–º—ñ–Ω–Ω–∏—Ö
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–º–∏–ª–∫–∏ –∑ null/undefined
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ Battery ‚Üí battery

#### `frontend/tsconfig.json`
- –î–æ–¥–∞–Ω–æ `"jsx": "react-jsx"` –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ JSX

---

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤—ñ –∑–∞—É–≤–∞–∂–µ–Ω–Ω—è

1. **JWT_SECRET**: –û–±–æ–≤'—è–∑–∫–æ–≤–æ –∑–º—ñ–Ω—ñ—Ç—å –Ω–∞ –±–µ–∑–ø–µ—á–Ω–∏–π –∫–ª—é—á —É production!
2. **CORS_ORIGIN**: –î–æ–¥–∞–π—Ç–µ –≤—Å—ñ –¥–æ–∑–≤–æ–ª–µ–Ω—ñ –¥–æ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ –∫–æ–º—É
3. **DATABASE_URL**: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
4. **API endpoint –¥–ª—è —Ä–æ–±–æ—Ç—ñ–≤**: `/api/robots/update` –≤—Å–µ —â–µ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π - —Ä–æ–∑–≥–ª—è–Ω—å—Ç–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è API –∫–ª—é—á–∞

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –ø–æ–¥–∞–ª—å—à–∏—Ö –ø–æ–∫—Ä–∞—â–µ–Ω—å

1. **–î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç–∏**: Unit —Ç–∞ integration —Ç–µ—Å—Ç–∏
2. **–î–æ–¥–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è**: –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è (Winston/Pino)
3. **–î–æ–¥–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é API**: Swagger/OpenAPI
4. **–î–æ–¥–∞—Ç–∏ CI/CD**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –¥–µ–ø–ª–æ–π
5. **–î–æ–¥–∞—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**: Health checks —Ç–∞ –º–µ—Ç—Ä–∏–∫–∏
6. **–î–æ–¥–∞—Ç–∏ rate limiting**: –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ DDoS
7. **–î–æ–¥–∞—Ç–∏ API –∫–ª—é—á –¥–ª—è —Ä–æ–±–æ—Ç—ñ–≤**: –ó–∞—Ö–∏—Å—Ç endpoint `/api/robots/update`
8. **–£–≤—ñ–º–∫–Ω—É—Ç–∏ strict mode**: –ü–æ—Å—Ç—É–ø–æ–≤–æ —É–≤—ñ–º–∫–Ω—É—Ç–∏ strict mode —É TypeScript

---

## üêõ –í—ñ–¥–æ–º—ñ –ø—Ä–æ–±–ª–µ–º–∏

1. –ü–æ–ª–µ `Battery` –≤ API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –º–æ–∂–µ –±—É—Ç–∏ `battery` - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å API
2. –î–µ—è–∫—ñ —Ç–∏–ø–∏ –º–æ–∂—É—Ç—å –ø–æ—Ç—Ä–µ–±—É–≤–∞—Ç–∏ –¥–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–î–µ—Ç–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –ø—Ä–æ–µ–∫—Ç—É –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ñ–∞–π–ª—ñ `ANALYSIS_IMPROVEMENTS.md`
